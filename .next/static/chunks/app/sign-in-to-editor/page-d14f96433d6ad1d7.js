(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553,880],{93700:function(e,r,t){Promise.resolve().then(t.bind(t,8274))},16463:function(e,r,t){"use strict";var o=t(71169);t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},8274:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var o=t(57437),a=t(2265),n=t(16463),s=t(83427);function l(){let e=(0,n.useSearchParams)();(0,n.useRouter)();let[r,t]=(0,a.useState)(!1),[l,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),h=e.get("source")||"vscode";return(0,a.useEffect)(()=>{let e=localStorage.getItem("theme"),r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=e||(r?"dark":"light");g("dark"===t),document.body.classList.toggle("dark-theme","dark"===t)},[]),(0,a.useEffect)(()=>{if(r&&c&&l){let e="codilore://auth/callback?token=".concat(encodeURIComponent(c),"&email=").concat(encodeURIComponent(l.email),"&name=").concat(encodeURIComponent(l.name));console.log("Redirecting to:",e),window.location.href=e}},[r,c,l,h]),(0,o.jsx)("main",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-color)"},children:(0,o.jsx)("div",{className:"w-full max-w-md",children:(0,o.jsxs)("div",{style:{background:"var(--bg-color)",borderRadius:"20px",boxShadow:"8px 8px 16px var(--shadow-color), -8px -8px 16px var(--highlight-color)",transition:"box-shadow 0.3s ease"},className:"p-8",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("div",{className:"flex justify-end mb-4",children:(0,o.jsx)("button",{onClick:()=>{let e=!u;g(e),document.body.classList.toggle("dark-theme",e),localStorage.setItem("theme",e?"dark":"light")},className:"p-3 rounded-full",style:{background:"var(--bg-color)",boxShadow:"6px 6px 12px var(--shadow-color), -6px -6px 12px var(--highlight-color)",color:"var(--text-color)"},title:u?"Switch to light mode":"Switch to dark mode",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u?(0,o.jsx)("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"}):(0,o.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}),!u&&(0,o.jsx)("circle",{cx:"12",cy:"12",r:"5"})]})})}),(0,o.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-color)"},children:"Sign in to Codilore"}),(0,o.jsx)("p",{style:{color:"var(--text-color)",opacity:.8},children:"Connect your account to use Codilore features in your editor"})]}),(0,o.jsx)(s.U,{onLogin:(e,r)=>{if(console.log("SignIn handleLogin called with:",e,r),i(e),d(r||null),t(!0),r){let t="codilore://auth/callback?token=".concat(encodeURIComponent(r),"&email=").concat(encodeURIComponent(e.email),"&name=").concat(encodeURIComponent(e.name));console.log("Redirecting to:",t),window.location.href=t}else console.log("No auth token provided, redirecting to main page"),window.location.href="/"}})]})})})}},83427:function(e,r,t){"use strict";t.d(r,{U:function(){return c}});var o=t(57437),a=t(2265),n=t(30998),s=t(38880);function l(e){let{onLogin:r}=e,t=async()=>{try{let e=(await (0,s.signInWithGooglePopup)()).user,t=await e.getIdToken(),o={email:e.email||void 0,name:e.displayName||void 0};r&&r(o,t);try{localStorage.setItem("firebaseIdToken",t)}catch(e){}}catch(r){console.error("Google sign-in failed:",r);let e=(null==r?void 0:r.message)||("string"==typeof r?r:"Unknown error");alert("Google sign-in failed: ".concat(e))}};return(0,o.jsx)("button",{type:"button",onClick:t,className:"w-full inline-flex items-center justify-center border border-gray-300 rounded-md py-2 px-4 hover:bg-gray-100",children:"Sign in with Google (Firebase)"})}var i=t(20357);function c(e){let{onLogin:r}=e,[t,s]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),[u,g]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[b,x]=(0,a.useState)(""),y=async e=>{e.preventDefault(),p(!0),x("");try{let e=t?{email:c,password:u}:{email:c,password:u,name:h},o=await fetch(t?"/api/auth/login":"/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await o.json();if(!o.ok)throw Error(a.error||"Authentication failed");if(a.success&&a.user)a.token&&localStorage.setItem("authToken",a.token),r(a.user);else throw Error("Invalid response from server")}catch(e){x(e instanceof Error?e.message:"An error occurred")}finally{p(!1)}};return(0,o.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex justify-center space-x-4 mb-6",children:[(0,o.jsx)("button",{type:"button",onClick:()=>s(!0),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat(t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"Login"}),(0,o.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat(t?"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600":"bg-blue-600 text-white"),children:"Register"})]}),!t&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,o.jsx)("input",{id:"name",type:"text",value:h,onChange:e=>m(e.target.value),required:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter your full name"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,o.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>d(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter your email"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),(0,o.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>g(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter your password"})]}),b&&(0,o.jsx)("div",{className:"text-red-600 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:b}),(0,o.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Processing...":t?"Sign In":"Create Account"}),(0,o.jsxs)("div",{className:"text-center mt-4 space-y-3",children:[(0,o.jsx)(l,{onLogin:(e,t)=>{try{t&&localStorage.setItem("authToken",t)}catch(e){}e&&e.email&&e.name&&r({email:e.email,name:e.name})}}),(0,o.jsx)("div",{children:(0,o.jsxs)("button",{type:"button",onClick:()=>{if(!i.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID){alert("Google OAuth not configured. Set GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET in .env.local and restart the dev server.");return}(0,n.signIn)("google")},className:"w-full inline-flex items-center justify-center border border-gray-300 rounded-md py-2 px-4 hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",children:[(0,o.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 533.5 544.3",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fill:"#4285f4",d:"M533.5 278.4c0-17.4-1.6-34.1-4.6-50.4H272v95.4h146.9c-6.3 34.1-25.3 62.9-54 82v68.1h87.3c51-46.9 81.3-116.3 81.3-195.1z"}),(0,o.jsx)("path",{fill:"#34a853",d:"M272 544.3c73.6 0 135.5-24.4 180.6-66.2l-87.3-68.1c-24.3 16.3-55.6 26-93.3 26-71.7 0-132.6-48.3-154.4-113.4H30.4v71.3C75.5 485.1 167 544.3 272 544.3z"}),(0,o.jsx)("path",{fill:"#fbbc04",d:"M117.6 324.8c-10.8-32.5-10.8-67.6 0-100.1V153.4H30.4c-39 77.9-39 169.4 0 247.3l87.2-76z"}),(0,o.jsx)("path",{fill:"#ea4335",d:"M272 107.7c39 0 74 13.4 101.6 39.9l76.1-76.1C407.3 24.8 345.4 0 272 0 167 0 75.5 59.2 30.4 153.4l87.2 71.3C139.4 156 200.3 107.7 272 107.7z"})]}),"Sign in with Google"]})})]})]})}},38880:function(e,r,t){"use strict";t.r(r),t.d(r,{auth:function(){return d},signInWithGitHubPopup:function(){return g},signInWithGooglePopup:function(){return u}});var o=t(15236),a=t(70303);let n={apiKey:"AIzaSyCnkNIBHSfT2F_HNKPuWeqxLQMlUmR7lqs",authDomain:"codiloredev.firebaseapp.com",projectId:"codiloredev",storageBucket:"codiloredev.firebasestorage.app",messagingSenderId:"445741863948",appId:"1:445741863948:web:df1ac0125f23d6cfbc4a29",measurementId:"G-FETZ675JFL"},s=!!(n.apiKey&&n.authDomain&&n.projectId&&n.appId),l=null,i=null,c=null;s&&((0,o.C6)().length||(0,o.ZF)(n),l=(0,a.v0)(),i=new a.hJ,c=new a.GH);let d=l;async function u(){if(!s||!l||!i)throw Error("Firebase client not configured.");try{return await (0,a.rh)(l,i)}catch(e){throw console.error("signInWithPopup error:",e),Error((null==e?void 0:e.message)||String(e))}}async function g(){if(!s||!l||!c)throw Error("Firebase client not configured.");try{return await (0,a.rh)(l,c)}catch(e){throw console.error("signInWithGitHubPopup error:",e),Error((null==e?void 0:e.message)||String(e))}}}},function(e){e.O(0,[15,998,652,971,23,744],function(){return e(e.s=93700)}),_N_E=e.O()}]);