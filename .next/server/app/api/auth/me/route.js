"use strict";(()=>{var e={};e.id=788,e.ids=[788],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},59659:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>c,staticGenerationAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{GET:()=>l});var s=t(49303),o=t(88716),i=t(60670),n=t(87070),u=t(95456);async function l(e){try{let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return n.NextResponse.json({error:"Authorization token required"},{status:401});let t=r.substring(7),a=u.e.verifyToken(t);if(!a)return n.NextResponse.json({error:"Invalid or expired token"},{status:401});let s=u.e.getUserByEmail(a.email);if(!s)return n.NextResponse.json({error:"User not found"},{status:404});return n.NextResponse.json({success:!0,user:{id:s.id,email:s.email,name:s.name,createdAt:s.createdAt},kiloCodeApiKey:null})}catch(e){return console.error("Get user error:",e),n.NextResponse.json({error:"Failed to get user information"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/me/route",pathname:"/api/auth/me",filename:"route",bundlePath:"app/api/auth/me/route"},resolvedPagePath:"C:\\Users\\win11\\Desktop\\newequa1\\src\\app\\api\\auth\\me\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:c}=p,h="/api/auth/me/route";function w(){return(0,i.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:m})}},95456:(e,r,t)=>{t.d(r,{e:()=>l});var a=t(42023),s=t.n(a),o=t(41482),i=t.n(o);let n=new Map,u=process.env.JWT_SECRET||"your-super-secret-jwt-key-change-in-production";class l{static async register(e,r,t){if(!e||!r||!t)throw Error("Email, password, and name are required");if(r.length<8)throw Error("Password must be at least 8 characters long");if(n.has(e.toLowerCase()))throw Error("User with this email already exists");let a=await s().hash(r,12),o={id:crypto.randomUUID(),email:e.toLowerCase(),name:t.trim(),passwordHash:a,createdAt:new Date};return n.set(o.email,o),{email:o.email,name:o.name}}static async login(e,r){if(!e||!r)throw Error("Email and password are required");let t=n.get(e.toLowerCase());if(!t||!await s().compare(r,t.passwordHash))throw Error("Invalid email or password");return{email:t.email,name:t.name}}static generateToken(e){return i().sign({email:e.email,name:e.name,iat:Math.floor(Date.now()/1e3)},u,{expiresIn:"7d"})}static verifyToken(e){try{let r=i().verify(e,u);return{email:r.email,name:r.name}}catch(e){return null}}static async hashPassword(e){return s().hash(e,12)}static async verifyPassword(e,r){return s().compare(e,r)}static getUserByEmail(e){return n.get(e.toLowerCase())}static async updatePassword(e,r){let t=n.get(e.toLowerCase());if(!t)throw Error("User not found");let a=await this.hashPassword(r);t.passwordHash=a,n.set(t.email,t)}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,972,944],()=>t(59659));module.exports=a})();