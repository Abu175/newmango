"use strict";(()=>{var e={};e.id=337,e.ids=[337],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},64898:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{POST:()=>u});var s=t(49303),a=t(88716),n=t(60670),p=t(87070),i=t(20330);async function u(e){try{let r=await (0,i.getToken)({req:e,secret:process.env.NEXTAUTH_SECRET});if(!r||!r.accessToken)return p.NextResponse.json({error:"Unauthorized: No access token found"},{status:401});if("facebook"!==r.provider)return p.NextResponse.json({error:"Unauthorized: Invalid provider"},{status:401});let{message:t,imageUrl:o,pageId:s,pageAccessToken:a}=await e.json();if(!t&&!o)return p.NextResponse.json({error:"Content is required (message or imageUrl)"},{status:400});let n=a||r.accessToken,u=s||"me",c=`https://graph.facebook.com/v18.0/${u}/feed`,d=new URLSearchParams({access_token:n});o?(c=`https://graph.facebook.com/v18.0/${u}/photos`,d.append("url",o),t&&d.append("caption",t)):t&&d.append("message",t);let l=await fetch(c,{method:"POST",body:d}),f=await l.json();if(!l.ok)return console.error("Facebook API Error:",f),p.NextResponse.json({error:f.error?.message||"Failed to post to Facebook"},{status:l.status});return p.NextResponse.json({success:!0,postId:f.id})}catch(e){return console.error("Internal Server Error:",e),p.NextResponse.json({error:"Internal Server Error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/facebook/route",pathname:"/api/facebook",filename:"route",bundlePath:"app/api/facebook/route"},resolvedPagePath:"C:\\Users\\win11\\Desktop\\newequa1\\src\\app\\api\\facebook\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:f}=c,x="/api/facebook/route";function h(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972,330],()=>t(64898));module.exports=o})();